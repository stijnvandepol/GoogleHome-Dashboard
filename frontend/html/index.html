<!DOCTYPE html>
<html lang="nl">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1280, initial-scale=1.0">
	<title>TV Dashboard</title>
	<style>
		:root {
			font-size: 16px;
			color-scheme: dark;
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		html, body {
			background: #000;
			height: 100%;
			overflow: hidden;
		}

		body {
			width: 1280px;
			height: 720px;
			margin: 0 auto;
			color: #f5f7ff;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			padding: 20px 30px;
		}

		.dashboard {
			display: flex;
			flex-direction: column;
			height: 100%;
			gap: 18px;
		}

		.header {
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			border-bottom: 2px solid rgba(255,255,255,0.08);
			padding-bottom: 6px;
		}

		.clock {
			font-size: 96px;
			font-weight: 200;
			letter-spacing: 4px;
		}

		.date {
			font-size: 28px;
			color: #b8c4ff;
			text-transform: capitalize;
		}

		.cards {
			display: grid;
			grid-template-columns: 420px 1fr;
			gap: 18px;
			flex: 1;
		}

		.card {
			background: rgba(255,255,255,0.04);
			border: 1px solid rgba(255,255,255,0.08);
			border-radius: 12px;
			padding: 22px;
			backdrop-filter: blur(10px);
			box-shadow: 0 15px 35px rgba(0,0,0,0.35);
			height: 100%;
		}

		.card-title {
			font-size: 26px;
			font-weight: 500;
			margin-bottom: 16px;
			display: flex;
			align-items: center;
			gap: 12px;
			color: #7dc9ff;
		}

		.weather-main {
			display: flex;
			align-items: baseline;
			gap: 16px;
		}

		.weather-temp {
			font-size: 96px;
			font-weight: 200;
		}

		.weather-desc {
			font-size: 28px;
			color: #e1ecff;
		}

		.weather-details {
			margin-top: 22px;
			font-size: 22px;
			color: #b8c4ff;
			line-height: 1.6;
		}

		.news-list {
			display: flex;
			flex-direction: column;
			gap: 14px;
			height: calc(100% - 44px);
			overflow: hidden;
		}

		.news-item {
			padding-bottom: 14px;
			border-bottom: 1px solid rgba(255,255,255,0.08);
		}

		.news-headline {
			font-size: 22px;
			font-weight: 500;
		}

		.news-meta {
			margin-top: 8px;
			font-size: 18px;
			color: #8fa1d1;
		}

		.loading {
			font-size: 24px;
			color: #8fa1d1;
		}
	</style>
</head>
<body>
	<main class="dashboard">
		<header class="header">
			<div>
				<div class="clock" id="clock">00:00</div>
				<div class="date" id="date">l Laadt datum...</div>
			</div>
		</header>

		<section class="cards">
			<article class="card" id="weather-card">
				<div class="card-title">Weer</div>
				<div id="weather" class="loading">Weer laden...</div>
			</article>

			<article class="card">
				<div class="card-title">Nieuws</div>
				<div id="news" class="news-list">
					<div class="loading">Nieuws laden...</div>
				</div>
			</article>
		</section>
	</main>

	<script>
		const LAT = 51.6467;  // Boxmeer
		const LON = 5.9447;

		function updateTime() {
			const now = new Date();
			const clock = now.toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' });
			const date = now.toLocaleDateString('nl-NL', {
				weekday: 'long', day: 'numeric', month: 'long', year: 'numeric'
			});
			document.getElementById('clock').textContent = clock;
			document.getElementById('date').textContent = date;
		}

		async function getWeather() {
			const el = document.getElementById('weather');
			try {
				const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&timezone=Europe/Amsterdam`;
				const resp = await fetch(url);
				const data = await resp.json();
				const cur = data.current;
				const temp = Math.round(cur.temperature_2m);
				const humidity = cur.relative_humidity_2m;
				const wind = Math.round(cur.wind_speed_10m);
				const code = cur.weather_code;
				const desc = interpretWeather(code);

				el.innerHTML = `
					<div class="weather-main">
						<div class="weather-temp">${temp}Â°</div>
						<div class="weather-desc">${desc}</div>
					</div>
					<div class="weather-details">
						Luchtvochtigheid: ${humidity}%<br>
						Wind: ${wind} km/u
					</div>
				`;
			} catch (err) {
				el.innerHTML = '<div class="loading">Kon weer niet laden</div>';
			}
		}

		function interpretWeather(code) {
			if (code === 0) return 'Helder';
			if (code <= 3) return 'Deels bewolkt';
			if (code <= 55) return 'Lichte regen';
			if (code <= 67) return 'Regen';
			if (code <= 77) return 'Sneeuw';
			if (code <= 82) return 'Zware buien';
			return 'Onstuimig';
		}

		async function getNews() {
			const el = document.getElementById('news');
			try {
				const resp = await fetch('https://api.rss2json.com/v1/api.json?rss_url=http://feeds.nos.nl/nosnieuwsalgemeen');
				const data = await resp.json();
				if (!data.items || data.items.length === 0) {
					el.innerHTML = '<div class="loading">Geen nieuws beschikbaar</div>';
					return;
				}
				const items = data.items.slice(0, 6)
					.map(item => {
						const date = new Date(item.pubDate);
						return `
							<div class="news-item">
								<div class="news-headline">${item.title}</div>
								<div class="news-meta">${timeAgo(date)}</div>
							</div>`;
					})
					.join('');
				el.innerHTML = `<div class="news-list">${items}</div>`;
			} catch (err) {
				el.innerHTML = '<div class="loading">Kon nieuws niet laden</div>';
			}
		}

		function timeAgo(date) {
			const seconds = Math.floor((Date.now() - date.getTime()) / 1000);
			if (seconds < 60) return 'Zojuist';
			if (seconds < 3600) return `${Math.floor(seconds / 60)} minuten geleden`;
			if (seconds < 86400) return `${Math.floor(seconds / 3600)} uur geleden`;
			return `${Math.floor(seconds / 86400)} dagen geleden`;
		}

		updateTime();
		getWeather();
		getNews();
		setInterval(updateTime, 1000);
		setInterval(getWeather, 600000); // 10 minuten
		setInterval(getNews, 600000);
	</script>
</body>
</html>
